<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Hello World!</title>
</head>
<body>
    <p th:text="${message}"></p>
    <form th:action="@{/reset}" method="post">
        <button>리셋하기</button>
    </form>
    <h1>끝말잇기 하자!</h1>
    <form method="post" th:action="@{/word}" th:object="${wordForm}">
        <label>단어:
            <input type="text" th:field="*{word}"/>
        </label>
        <button>제출</button>
    </form>
    <section>
        <ul>
<!--            <li th:each="word : ${words}" th:text="${word}"></li>-->
            <li th:each="word, iterStat : ${words}">
                <span th:text="${word.getText()}"></span>
                <span th:text="${word.getCreatedAt()}"></span>
                <p th:if="${iterStat.last}">Race Start~</p>
                <p th:if="${!iterStat.last}">
<!--                    <span th:text="${#strings.substring(word.getText(), 0, 1)}"></span>-->
<!--                    <span th:text="${words[iterStat.index + 1].getText()}"></span>-->
<!--                    <span th:text="${#strings.substring(words[iterStat.index + 1].getText(), -1, 1)}"></span>-->
                    <span th:if="${#strings.substring(word.getText(), 0, 1).equals(#strings.substring(words[iterStat.index + 1].getText(), words[iterStat.index + 1].getText().length() - 1, words[iterStat.index + 1].getText().length()))}">성공!</span>
                </p>
                <form th:action="@{/update}" method="post">
                    <input type="hidden" th:name="uuid" th:value="${word.getUuid()}" />
                    <label>
                        수정 :
                        <input type="text" th:name="newWord"/>
                    </label>
                    <button>수정</button>
                </form>
                <form th:action="@{/delete}" method="post">
                    <input hidden="hidden" name="id" th:value="${word.getUuid()}"/>
                    <button>삭제</button>
                </form>
            </li>
        </ul>
    </section>
</body>
</html>